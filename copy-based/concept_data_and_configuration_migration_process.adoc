---
permalink: copy-based/concept_data_and_configuration_migration_process.html 
sidebar: sidebar 
keywords: ontap, copy, based, transition, data, configuration, migration, process 
summary: '7-Mode 전환 툴을 사용한 데이터 및 구성 마이그레이션 프로세스는 준비, 기본 데이터 복사, 구성 적용\(사전 컷오버\), 스토리지 컷오버로 구성됩니다. Chain of Custody 검증을 위한 SnapLock 볼륨이 있는 경우 컷오버 이후 Chain of Custody Verification이 추가 단계입니다.' 
---
= 데이터 및 구성 마이그레이션 프로세스
:icons: font
:imagesdir: ../media/


[role="lead"]
7-Mode 전환 툴을 사용하는 데이터 및 구성 마이그레이션 프로세스는 준비, 기본 데이터 복사, 구성 적용(사전 컷오버), 스토리지 컷오버로 구성됩니다. Chain of Custody 검증을 위한 SnapLock 볼륨이 있는 경우 컷오버 이후 Chain of Custody Verification이 추가 단계입니다.

다음 이미지는 마이그레이션 프로세스의 여러 단계를 보여 줍니다.

image::../media/transition_operational_flow.gif[전환 운영 흐름]



== 준비

이 단계에서 사전 점검을 수행하여 기능을 검증합니다. 이 프로세스에서는 7-Mode 스토리지 시스템을 검사하여 볼륨 및 구성이 ONTAP로 마이그레이션할 준비가 되었는지 확인합니다. 클러스터 구성이 올바른지, 그리고 전환을 지원할 수 있는지 확인합니다. 전이를 계속하기 전에 모든 오류를 해결해야 합니다. 이 도구를 사용하여 경고를 해결하지 않고 계속 진행할 수 있지만, 전환을 진행하기 전에 경고의 영향을 이해해야 합니다. 사전 점검을 여러 번 실행하여 모든 오류가 해결되었는지 확인할 수 있습니다.

평가 중에 수행된 사전 점검 단계 및 평가 단계가 유사한 것처럼 보이지만 차이점이 있습니다. 사전 점검 단계는 마이그레이션 소스(7-Mode) 및 타겟(ONTAP) 시스템으로 식별된 특정 스토리지 시스템에 중점을 둔 더욱 상세한 테스트입니다. 평가 단계에서는 마이그레이션 소스 시스템만 평가하여 ONTAP와 기능 차이를 확인합니다.



== 기본 데이터 복사본

SVM에서 새 볼륨이 생성되고 7-Mode와 ONTAP 볼륨 간에 SnapMirror 관계가 형성되며 기본 전송이 수행됩니다. 기준선이 완료되면 사용자 정의 데이터 복사본 일정에 따라 증분 전송이 자동으로 실행됩니다. 이 단계가 완료되는 동안 소스 스토리지에 액세스하는 클라이언트 및 서버가 온라인 상태로 유지됩니다.

데이터를 복사하려면 CPU, 메모리 및 스토리지 액세스가 필요하며, 이로 인해 소스 스토리지 시스템에서 추가 리소스가 사용됩니다. 리소스 사용량이 적은 시간에 데이터 복사 작업을 수행하도록 예약하는 것이 가장 좋습니다(CPU 사용은 약 50%).



== 구성 적용(사전 컷오버)

이 단계에서는 SnapMirror 증분이 전송되며 구성 정보가 ONTAP 시스템, SVM 및 볼륨에 적용됩니다. 선택적으로 스토리지 컷오버를 시작하기 전에 전환하고 있는 ONTAP 볼륨을 테스트할 수도 있습니다.

대부분의 구성이 적용되더라도 일부 작업은 스토리지 컷오버로 연기됩니다. 예를 들어, 할당량을 적용하면 됩니다.

전환을 위해 선택한 7-Mode IP 주소는 관리 중단 상태로 생성됩니다. 전이에 대해 선택한 새 IP 주소가 관리 설정 상태로 생성됩니다. 이러한 새 IP 주소를 사용하여 사전 컷오버 테스트 중에 데이터 액세스를 검증할 수 있습니다.

계획된 컷오버 기간 며칠 또는 몇 주 전에 Apply Configuration(precutover) 단계를 실행하는 것이 좋습니다. 이 작업을 통해 모든 구성이 올바르게 적용되고 변경이 필요한지 여부를 확인할 수 있습니다.


TIP: 증분 업데이트는 필요하지 않지만 가능하면 스토리지 컷오버에 가깝게 증분 전송을 수행하여 클라이언트의 연결이 끊긴 시간을 최소화하는 것이 좋습니다.



== 스토리지 컷오버

스토리지 컷오버를 수행하는 동안 높은 수준에서 클라이언트 연결이 끊어지고, 최종 데이터 전송이 수행되고, SnapMirror 관계가 끊기고, 클라이언트가 수동으로 다시 연결됩니다.

소스 스토리지 볼륨에서 클라이언트 또는 서버를 분리하면 최종 복제가 실행되는 동안 추가 쓰기가 수행되지 않습니다. 클라이언트의 연결을 끊기 전에 다운타임을 최소화하기 위해 증분 업데이트를 수행하는 것이 좋습니다.

마이그레이션 중인 볼륨에 대해서만 스토리지 액세스 연결을 끊어야 합니다. 스토리지 측 또는 클라이언트 측에서 스토리지 액세스를 중단할 수 있습니다. Best Practice는 스토리지 측의 접속을 중단하는 것입니다. 예를 들어, CIFS 클라이언트가 7-Mode 스토리지 시스템에서 ""user01""이라는 볼륨에 액세스하는 경우 "cifs terminate -v user01" 명령을 사용하여 볼륨에 있는 모든 CIFS 공유에 대한 액세스를 해제할 수 있습니다(스토리지 측에서 클라이언트 액세스 중단). IP 주소, 마운트 지점 또는 공유 이름은 마이그레이션 결과로 변경될 수 있으므로 클라이언트 측에서도 클라이언트 액세스가 중단될 수 있습니다. 클라이언트가 마이그레이션 중인 스토리지 컨테이너에 새 데이터를 쓸 수 없는 경우 이러한 방법 중 하나 또는 둘 다를 사용하여 액세스를 중단할 수 있습니다.

클라이언트의 연결이 끊긴 후 7-Mode 전환 툴은 소스 및 타겟 데이터 세트가 모두 패리티에 있도록 최종 복사본을 실행합니다. 7-Mode 전환 툴은 SVM에 데이터 LIF를 구성합니다. SAN 구성 및 할당량 적용과 같이 사전 컷오버 중에 전환되지 않은 일부 구성 변경도 지금은 SVM에 적용됩니다.

스토리지 컷오버가 완료되면 클라이언트를 수동으로 다시 연결하고 데이터 액세스를 검증할 수 있습니다. 데이터 액세스를 검증하려면 클라이언트가 ONTAP 시스템에 제대로 액세스하고 있고 모든 권한이 예상대로 작동하는지 확인해야 합니다.



== SnapLock 볼륨에 대한 관리 대상 검증 체인

전환이 완료된 후 프로젝트의 SnapLock 볼륨에 대해 관리 연결 작업을 트리거할 수 있습니다. 이 작업은 필수 작업이 아니며 SnapLock 볼륨 전환을 위해 체인 보호 검증이 필요한 경우에만 필요합니다. 프로젝트의 모든 SnapLock 볼륨 또는 프로젝트의 SnapLock 볼륨 하위 집합에 대해 이 작업을 수행할 수 있습니다. 규정 준수 및 엔터프라이즈 SnapLock 볼륨 모두에 대해 관리 연속성 검증이 지원됩니다. Chain of Custody 검증은 읽기-쓰기 SnapLock 볼륨에만 지원되며 읽기 전용 SnapLock 볼륨에는 지원되지 않습니다.


IMPORTANT: ASCII가 아닌 문자가 있는 파일 이름이 있는 SnapLock 볼륨에 대해서는 관리 대상 체인 검증이 지원되지 않습니다.

검증 워크플로우는 7-Mode 전환 툴 GUI에서만 지원되며 CLI 워크플로우에서는 지원되지 않습니다.

관리 대상 확인 작업 체인은 다음을 수행합니다.

* 7-Mode 볼륨에서 모든 WORM 파일을 열거합니다
* 에서는 이전에 7-Mode 볼륨과 전환된 ONTAP 볼륨 모두에 열거된 각 WORM 파일의 지문을 계산합니다
* 일치하거나 일치하지 않는 지문이 있는 파일 수와 불일치 이유를 자세히 설명하는 보고서를 생성합니다


모든 WORM 파일의 지문 데이터는 계획 단계에서 제공된 ONTAP 볼륨에 저장됩니다.


NOTE: 7-Mode 볼륨의 파일 수에 따라, Chain of Custody 검증 프로세스에는 상당한 시간(일 또는 주)이 걸릴 수 있습니다.
